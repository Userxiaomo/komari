import{c as T,u as L,r as y,j as e,R as I,L as F,a as E,b as K}from"./entry-index-B-fzmtso.js";import{f as Z,g as D,U as G,D as J,M as W,N as Y}from"./chunk-DetailsGrid-C9abgkLr.js";import{T as q,a as X,b as U,c as k,d as Q,e as f}from"./chunk-table-CFAkpkHt.js";import{f as v}from"./chunk-unitHelper-BjgrQHpY.js";import{F as ee,P as ae,p as se,l as _}from"./chunk-PriceTags-BBV80nTf.js";import{T as ne,P as te,s as ie,i as re}from"./chunk-tips-CXnB5HDr.js";import{C as le}from"./chunk-chevron-down-DWbbmXVQ.js";import{p as o}from"./chunk-flex-MGzrVjdG.js";import{o as S}from"./chunk-icon-button-Bgu4ejrN.js";import{e as oe}from"./chunk-badge-NlYxK9Bs.js";import{S as ce}from"./chunk-search-SRY80dSo.js";import{u as de,c as he}from"./chunk-text-field-BEd1A3G3.js";import{p as N}from"./chunk-base-button-DH9OSHVU.js";import{u as H,a as ue}from"./chunk-LiveDataContext-BED_eCku.js";import{S as me}from"./chunk-settings-CuxDDIla.js";import{o as pe}from"./chunk-card-BGBx-kb8.js";import{n as $,m as O,u as P}from"./chunk-callout-Dor7Er5s.js";import{i as ge}from"./chunk-switch-DMZS-wzt.js";import"./chunk-react-vendor-Csw2ODfV.js";import"./chunk-box-3B0sA5_Q.js";import"./chunk-utils-bRKmu4jq.js";import"./chunk-throttle-CmHaeH0s.js";import"./chunk-trending-up-CRp4KBGa.js";import"./chunk-separator-BTxVbICm.js";import"./chunk-internal-Be4ivmVq.js";import"./chunk-require-react-element-DVojHXYL.js";import"./chunk-index-D_W452Xx.js";import"./chunk-index-BBO7VtY0.js";import"./chunk-dialog-DmkLuhHc.js";import"./chunk-heading-CKQb6e5J.js";import"./chunk-index-B-NU4fG6.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],we=T("chevron-right",xe);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ze=T("chevron-up",je);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],be=T("grid-3x3",fe);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],Ce=T("table-2",ke);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ye=T("x",Ne),ve={"🇭🇰":{en:"Hong Kong",zh:"香港",aliases:["hk","hongkong","hong kong","香港","HK"]},"🇨🇳":{en:"China",zh:"中国",aliases:["cn","china","中国","中华人民共和国","prc","CN"]},"🇺🇸":{en:"United States",zh:"美国",aliases:["us","usa","united states","america","美国","美利坚","US","USA"]},"🇯🇵":{en:"Japan",zh:"日本",aliases:["jp","japan","日本","JP"]},"🇰🇷":{en:"South Korea",zh:"韩国",aliases:["kr","korea","south korea","韩国","南韩","KR"]},"🇸🇬":{en:"Singapore",zh:"新加坡",aliases:["sg","singapore","新加坡","SG"]},"🇹🇼":{en:"Taiwan",zh:"台湾",aliases:["tw","taiwan","台湾","台灣","TW"]},"🇬🇧":{en:"United Kingdom",zh:"英国",aliases:["gb","uk","united kingdom","britain","英国","英國","GB","UK"]},"🇩🇪":{en:"Germany",zh:"德国",aliases:["de","germany","deutschland","德国","德國","DE"]},"🇫🇷":{en:"France",zh:"法国",aliases:["fr","france","法国","法國","FR"]},"🇨🇦":{en:"Canada",zh:"加拿大",aliases:["ca","canada","加拿大","CA"]},"🇦🇺":{en:"Australia",zh:"澳大利亚",aliases:["au","australia","澳大利亚","澳洲","AU"]},"🇷🇺":{en:"Russia",zh:"俄罗斯",aliases:["ru","russia","俄罗斯","俄國","RU"]},"🇮🇳":{en:"India",zh:"印度",aliases:["in","india","印度","IN"]},"🇧🇷":{en:"Brazil",zh:"巴西",aliases:["br","brazil","巴西","BR"]},"🇳🇱":{en:"Netherlands",zh:"荷兰",aliases:["nl","netherlands","holland","荷兰","荷蘭","NL"]},"🇮🇹":{en:"Italy",zh:"意大利",aliases:["it","italy","意大利","IT"]},"🇪🇸":{en:"Spain",zh:"西班牙",aliases:["es","spain","西班牙","ES"]},"🇸🇪":{en:"Sweden",zh:"瑞典",aliases:["se","sweden","瑞典","SE"]},"🇳🇴":{en:"Norway",zh:"挪威",aliases:["no","norway","挪威","NO"]},"🇫🇮":{en:"Finland",zh:"芬兰",aliases:["fi","finland","芬兰","芬蘭","FI"]},"🇨🇭":{en:"Switzerland",zh:"瑞士",aliases:["ch","switzerland","瑞士","CH"]},"🇦🇹":{en:"Austria",zh:"奥地利",aliases:["at","austria","奥地利","奧地利","AT"]},"🇧🇪":{en:"Belgium",zh:"比利时",aliases:["be","belgium","比利时","比利時","BE"]},"🇵🇹":{en:"Portugal",zh:"葡萄牙",aliases:["pt","portugal","葡萄牙","PT"]},"🇬🇷":{en:"Greece",zh:"希腊",aliases:["gr","greece","希腊","希臘","GR"]},"🇹🇷":{en:"Turkey",zh:"土耳其",aliases:["tr","turkey","土耳其","TR"]},"🇵🇱":{en:"Poland",zh:"波兰",aliases:["pl","poland","波兰","波蘭","PL"]},"🇨🇿":{en:"Czech Republic",zh:"捷克",aliases:["cz","czech","czech republic","捷克","CZ"]},"🇭🇺":{en:"Hungary",zh:"匈牙利",aliases:["hu","hungary","匈牙利","HU"]},"🇷🇴":{en:"Romania",zh:"罗马尼亚",aliases:["ro","romania","罗马尼亚","羅馬尼亞","RO"]},"🇧🇬":{en:"Bulgaria",zh:"保加利亚",aliases:["bg","bulgaria","保加利亚","保加利亞","BG"]},"🇭🇷":{en:"Croatia",zh:"克罗地亚",aliases:["hr","croatia","克罗地亚","克羅地亞","HR"]},"🇸🇮":{en:"Slovenia",zh:"斯洛文尼亚",aliases:["si","slovenia","斯洛文尼亚","斯洛文尼亞","SI"]},"🇸🇰":{en:"Slovakia",zh:"斯洛伐克",aliases:["sk","slovakia","斯洛伐克","SK"]},"🇱🇻":{en:"Latvia",zh:"拉脱维亚",aliases:["lv","latvia","拉脱维亚","拉脫維亞","LV"]},"🇱🇹":{en:"Lithuania",zh:"立陶宛",aliases:["lt","lithuania","立陶宛","LT"]},"🇪🇪":{en:"Estonia",zh:"爱沙尼亚",aliases:["ee","estonia","爱沙尼亚","愛沙尼亞","EE"]},"🇲🇽":{en:"Mexico",zh:"墨西哥",aliases:["mx","mexico","墨西哥","MX"]},"🇦🇷":{en:"Argentina",zh:"阿根廷",aliases:["ar","argentina","阿根廷","AR"]},"🇨🇱":{en:"Chile",zh:"智利",aliases:["cl","chile","智利","CL"]},"🇨🇴":{en:"Colombia",zh:"哥伦比亚",aliases:["co","colombia","哥伦比亚","哥倫比亞","CO"]},"🇵🇪":{en:"Peru",zh:"秘鲁",aliases:["pe","peru","秘鲁","秘魯","PE"]},"🇻🇪":{en:"Venezuela",zh:"委内瑞拉",aliases:["ve","venezuela","委内瑞拉","委內瑞拉","VE"]},"🇺🇾":{en:"Uruguay",zh:"乌拉圭",aliases:["uy","uruguay","乌拉圭","烏拉圭","UY"]},"🇪🇨":{en:"Ecuador",zh:"厄瓜多尔",aliases:["ec","ecuador","厄瓜多尔","厄瓜多爾","EC"]},"🇧🇴":{en:"Bolivia",zh:"玻利维亚",aliases:["bo","bolivia","玻利维亚","玻利維亞","BO"]},"🇵🇾":{en:"Paraguay",zh:"巴拉圭",aliases:["py","paraguay","巴拉圭","PY"]},"🇬🇾":{en:"Guyana",zh:"圭亚那",aliases:["gy","guyana","圭亚那","圭亞那","GY"]},"🇸🇷":{en:"Suriname",zh:"苏里南",aliases:["sr","suriname","苏里南","蘇里南","SR"]},"🇫🇰":{en:"Falkland Islands",zh:"福克兰群岛",aliases:["fk","falkland","福克兰","福克蘭","FK"]},"🇬🇫":{en:"French Guiana",zh:"法属圭亚那",aliases:["gf","french guiana","法属圭亚那","法屬圭亞那","GF"]},"🇵🇦":{en:"Panama",zh:"巴拿马",aliases:["pa","panama","巴拿马","巴拿馬","PA"]},"🇨🇷":{en:"Costa Rica",zh:"哥斯达黎加",aliases:["cr","costa rica","哥斯达黎加","哥斯達黎加","CR"]},"🇳🇮":{en:"Nicaragua",zh:"尼加拉瓜",aliases:["ni","nicaragua","尼加拉瓜","NI"]},"🇭🇳":{en:"Honduras",zh:"洪都拉斯",aliases:["hn","honduras","洪都拉斯","HN"]},"🇬🇹":{en:"Guatemala",zh:"危地马拉",aliases:["gt","guatemala","危地马拉","危地馬拉","GT"]},"🇧🇿":{en:"Belize",zh:"伯利兹",aliases:["bz","belize","伯利兹","伯利茲","BZ"]},"🇸🇻":{en:"El Salvador",zh:"萨尔瓦多",aliases:["sv","el salvador","萨尔瓦多","薩爾瓦多","SV"]},"🇯🇲":{en:"Jamaica",zh:"牙买加",aliases:["jm","jamaica","牙买加","牙買加","JM"]},"🇨🇺":{en:"Cuba",zh:"古巴",aliases:["cu","cuba","古巴","CU"]},"🇩🇴":{en:"Dominican Republic",zh:"多明尼加",aliases:["do","dominican","多明尼加","DO"]},"🇭🇹":{en:"Haiti",zh:"海地",aliases:["ht","haiti","海地","HT"]},"🇧🇸":{en:"Bahamas",zh:"巴哈马",aliases:["bs","bahamas","巴哈马","巴哈馬","BS"]},"🇧🇧":{en:"Barbados",zh:"巴巴多斯",aliases:["bb","barbados","巴巴多斯","BB"]},"🇹🇹":{en:"Trinidad and Tobago",zh:"特立尼达和多巴哥",aliases:["tt","trinidad","特立尼达","特立尼達","TT"]},"🇵🇭":{en:"Philippines",zh:"菲律宾",aliases:["ph","philippines","菲律宾","菲律賓","PH"]},"🇹🇭":{en:"Thailand",zh:"泰国",aliases:["th","thailand","泰国","泰國","TH"]},"🇻🇳":{en:"Vietnam",zh:"越南",aliases:["vn","vietnam","越南","VN"]},"🇲🇾":{en:"Malaysia",zh:"马来西亚",aliases:["my","malaysia","马来西亚","馬來西亞","MY"]},"🇮🇩":{en:"Indonesia",zh:"印度尼西亚",aliases:["id","indonesia","印度尼西亚","印尼","ID"]},"🇱🇦":{en:"Laos",zh:"老挝",aliases:["la","laos","老挝","老撾","LA"]},"🇰🇭":{en:"Cambodia",zh:"柬埔寨",aliases:["kh","cambodia","柬埔寨","KH"]},"🇲🇲":{en:"Myanmar",zh:"缅甸",aliases:["mm","myanmar","burma","缅甸","緬甸","MM"]},"🇧🇳":{en:"Brunei",zh:"文莱",aliases:["bn","brunei","文莱","汶萊","BN"]},"🇪🇬":{en:"Egypt",zh:"埃及",aliases:["eg","egypt","埃及","EG"]},"🇿🇦":{en:"South Africa",zh:"南非",aliases:["za","south africa","南非","ZA"]},"🇳🇬":{en:"Nigeria",zh:"尼日利亚",aliases:["ng","nigeria","尼日利亚","尼日利亞","NG"]},"🇰🇪":{en:"Kenya",zh:"肯尼亚",aliases:["ke","kenya","肯尼亚","肯亞","KE"]},"🇪🇹":{en:"Ethiopia",zh:"埃塞俄比亚",aliases:["et","ethiopia","埃塞俄比亚","埃塞俄比亞","ET"]},"🇬🇭":{en:"Ghana",zh:"加纳",aliases:["gh","ghana","加纳","迦納","GH"]},"🇺🇬":{en:"Uganda",zh:"乌干达",aliases:["ug","uganda","乌干达","烏干達","UG"]},"🇹🇿":{en:"Tanzania",zh:"坦桑尼亚",aliases:["tz","tanzania","坦桑尼亚","坦尚尼亞","TZ"]},"🇷🇼":{en:"Rwanda",zh:"卢旺达",aliases:["rw","rwanda","卢旺达","盧旺達","RW"]},"🇿🇼":{en:"Zimbabwe",zh:"津巴布韦",aliases:["zw","zimbabwe","津巴布韦","辛巴威","ZW"]},"🇿🇲":{en:"Zambia",zh:"赞比亚",aliases:["zm","zambia","赞比亚","尚比亞","ZM"]},"🇧🇼":{en:"Botswana",zh:"博茨瓦纳",aliases:["bw","botswana","博茨瓦纳","波札那","BW"]},"🇳🇦":{en:"Namibia",zh:"纳米比亚",aliases:["na","namibia","纳米比亚","納米比亞","NA"]},"🇲🇦":{en:"Morocco",zh:"摩洛哥",aliases:["ma","morocco","摩洛哥","MA"]},"🇩🇿":{en:"Algeria",zh:"阿尔及利亚",aliases:["dz","algeria","阿尔及利亚","阿爾及利亞","DZ"]},"🇹🇳":{en:"Tunisia",zh:"突尼斯",aliases:["tn","tunisia","突尼斯","TN"]},"🇱🇾":{en:"Libya",zh:"利比亚",aliases:["ly","libya","利比亚","利比亞","LY"]},"🇸🇩":{en:"Sudan",zh:"苏丹",aliases:["sd","sudan","苏丹","蘇丹","SD"]},"🇸🇸":{en:"South Sudan",zh:"南苏丹",aliases:["ss","south sudan","南苏丹","南蘇丹","SS"]},"🇨🇩":{en:"Democratic Republic of Congo",zh:"刚果民主共和国",aliases:["cd","congo","drc","刚果","剛果","CD"]},"🇨🇬":{en:"Republic of Congo",zh:"刚果共和国",aliases:["cg","congo","刚果","剛果","CG"]},"🇨🇫":{en:"Central African Republic",zh:"中非共和国",aliases:["cf","central african","中非","CF"]},"🇨🇲":{en:"Cameroon",zh:"喀麦隆",aliases:["cm","cameroon","喀麦隆","喀麥隆","CM"]},"🇹🇩":{en:"Chad",zh:"乍得",aliases:["td","chad","乍得","TD"]},"🇳🇪":{en:"Niger",zh:"尼日尔",aliases:["ne","niger","尼日尔","尼日爾","NE"]},"🇲🇱":{en:"Mali",zh:"马里",aliases:["ml","mali","马里","馬利","ML"]},"🇧🇫":{en:"Burkina Faso",zh:"布基纳法索",aliases:["bf","burkina","布基纳法索","布吉納法索","BF"]},"🇸🇳":{en:"Senegal",zh:"塞内加尔",aliases:["sn","senegal","塞内加尔","塞內加爾","SN"]},"🇬🇲":{en:"Gambia",zh:"冈比亚",aliases:["gm","gambia","冈比亚","甘比亞","GM"]},"🇬🇼":{en:"Guinea-Bissau",zh:"几内亚比绍",aliases:["gw","guinea-bissau","几内亚比绍","幾內亞比索","GW"]},"🇬🇳":{en:"Guinea",zh:"几内亚",aliases:["gn","guinea","几内亚","幾內亞","GN"]},"🇸🇱":{en:"Sierra Leone",zh:"塞拉利昂",aliases:["sl","sierra leone","塞拉利昂","SL"]},"🇱🇷":{en:"Liberia",zh:"利比里亚",aliases:["lr","liberia","利比里亚","賴比瑞亞","LR"]},"🇨🇮":{en:"Ivory Coast",zh:"科特迪瓦",aliases:["ci","ivory coast","科特迪瓦","象牙海岸","CI"]},"🇹🇬":{en:"Togo",zh:"多哥",aliases:["tg","togo","多哥","TG"]},"🇧🇯":{en:"Benin",zh:"贝宁",aliases:["bj","benin","贝宁","貝寧","BJ"]}},Se=(l,t)=>{const a=t.toLowerCase().trim();if(l===t)return!0;const h=ve[l];return h?h.en.toLowerCase().includes(a)||h.zh.includes(a)?!0:h.aliases.some(j=>j.toLowerCase().includes(a)):l.toLowerCase().includes(a)},Te=({nodes:l,liveData:t})=>{const[a]=L(),[h,j]=y.useState(new Set),[u,b]=y.useState({field:null,order:"default"}),x=n=>{j(c=>{const s=new Set(c);return s.has(n)?s.delete(n):s.add(n),s})},g=n=>c=>{c.preventDefault(),b(s=>{if(s.field===n){const r=s.order==="default"?"asc":s.order==="asc"?"desc":"default";return{field:r==="default"?null:n,order:r}}else return{field:n,order:"asc"}})},i=n=>u.field!==n?null:u.order==="asc"?e.jsx(ze,{size:14}):e.jsx(le,{size:14}),m=t&&t.online?t.online:[],z=n=>{const c={cpu:{usage:0},ram:{used:0},disk:{used:0},network:{up:0,down:0,totalUp:0,totalDown:0},uptime:0};return t&&t.data&&t.data[n]||c},C=[...l].sort((n,c)=>{const s=m.includes(n.uuid),r=m.includes(c.uuid),d=z(n.uuid),w=z(c.uuid);if(!u.field||u.order==="default")return s!==r?s?-1:1:n.weight-c.weight;let p=0;switch(u.field){case"name":p=n.name.localeCompare(c.name);break;case"os":p=n.os.localeCompare(c.os);break;case"status":p=Number(r)-Number(s);break;case"cpu":p=d.cpu.usage-w.cpu.usage;break;case"ram":const R=n.mem_total?d.ram.used/n.mem_total*100:0,M=c.mem_total?w.ram.used/c.mem_total*100:0;p=R-M;break;case"disk":const V=n.disk_total?d.disk.used/n.disk_total*100:0,B=c.disk_total?w.disk.used/c.disk_total*100:0;p=V-B;break;case"price":p=n.price-c.price;break;case"networkUp":p=d.network.up-w.network.up;break;case"networkDown":p=d.network.down-w.network.down;break;case"totalUp":p=d.network.totalUp-w.network.totalUp;break;case"totalDown":p=d.network.totalDown-w.network.totalDown;break;default:p=0}return u.order==="desc"?-p:p});return e.jsx("div",{className:"mx-4 overflow-x-auto rounded-xl node-table-container",children:e.jsxs(q,{children:[e.jsx(X,{children:e.jsxs(U,{children:[e.jsx(k,{className:"w-[24px]"}),e.jsx(k,{className:"w-[200px] min-w-[150px] cursor-pointer hover:bg-accent-2 select-none",onClick:g("name"),title:a("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",children:[a("nodeCard.name"),i("name")]})}),e.jsx(k,{className:"cursor-pointer hover:bg-accent-2 select-none",onClick:g("os"),title:a("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",children:[a("nodeCard.os"),i("os")]})}),e.jsx(k,{className:"max-w-[128px] cursor-pointer hover:bg-accent-2 select-none",onClick:g("status"),title:a("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",children:[a("nodeCard.status"),i("status")]})}),e.jsx(k,{className:"cursor-pointer hover:bg-accent-2 select-none",onClick:g("cpu"),title:a("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",children:[a("nodeCard.cpu"),i("cpu")]})}),e.jsx(k,{className:"cursor-pointer hover:bg-accent-2 select-none",onClick:g("ram"),title:a("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",children:[a("nodeCard.ram"),i("ram")]})}),e.jsx(k,{className:"cursor-pointer hover:bg-accent-2 select-none",onClick:g("disk"),title:a("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",children:[a("nodeCard.disk"),i("disk")]})}),e.jsx(k,{className:"cursor-pointer hover:bg-accent-2 select-none",onClick:g("price"),title:a("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",children:[a("nodeCard.price"),i("price")]})}),e.jsx(k,{className:"cursor-pointer hover:bg-accent-2 select-none text-center min-w-[80px]",onClick:g("networkUp"),title:a("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",justify:"center",children:[a("nodeCard.networkUploadSpeed"),i("networkUp")]})}),e.jsx(k,{className:"cursor-pointer hover:bg-accent-2 select-none text-center min-w-[80px]",onClick:g("networkDown"),title:a("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",justify:"center",children:[a("nodeCard.networkDownloadSpeed"),i("networkDown")]})}),e.jsx(k,{className:"cursor-pointer hover:bg-accent-2 select-none text-center min-w-[80px]",onClick:g("totalUp"),title:a("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",justify:"center",children:[a("nodeCard.totalUpload"),i("totalUp")]})}),e.jsx(k,{className:"cursor-pointer hover:bg-accent-2 select-none text-center min-w-[80px]",onClick:g("totalDown"),title:a("nodeCard.sortTooltip"),children:e.jsxs(o,{align:"center",gap:"1",justify:"center",children:[a("nodeCard.totalDownload"),i("totalDown")]})})]})}),e.jsx(Q,{children:C.map(n=>{const c=m.includes(n.uuid),s=z(n.uuid),r=h.has(n.uuid),d=n.mem_total?s.ram.used/n.mem_total*100:0,w=n.disk_total?s.disk.used/n.disk_total*100:0;return e.jsxs(I.Fragment,{children:[e.jsxs(U,{className:"hover:bg-accent-2 transition-colors duration-200 table-row-hover",onClick:()=>x(n.uuid),children:[e.jsx(f,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(S,{variant:"ghost",size:"1",className:`expand-button ${r?"expanded":""}`,"aria-label":"Expand row",children:e.jsx(we,{size:16})})})}),e.jsx(f,{className:"node-name-cell",children:e.jsxs(o,{align:"center",gap:"1",children:[e.jsx(ee,{flag:n.region}),e.jsx(F,{to:`/instance/${n.uuid}`,className:"hover:underline",onClick:p=>p.stopPropagation(),children:e.jsxs(o,{direction:"column",gap:"0",children:[e.jsx("label",{className:"max-w-[150px] font-bold text-lg truncate",children:n.name}),c?e.jsx("label",{className:"-mt-1 text-muted-foreground text-xs",children:Z(s.uptime,a)}):e.jsx("label",{className:"-mt-1 text-muted-foreground",children:"-"})]})})]})}),e.jsx(f,{className:"w-4",children:e.jsx("img",{src:D(n.os),alt:n.os,className:"w-5 h-5 mr-2"})}),e.jsx(f,{children:e.jsxs(o,{direction:"row",justify:"start",align:"center",gap:"1",children:[e.jsx("div",{children:e.jsx(oe,{color:c?"green":"red",variant:"soft",size:"1",children:a(c?"nodeCard.online":"nodeCard.offline")})}),s.message&&e.jsx(ne,{color:"#CE282E",children:s.message})]})}),e.jsx(f,{children:e.jsx("div",{className:"w-[100px]",children:e.jsx(G,{label:"",value:s.cpu.usage,compact:!0})})}),e.jsx(f,{children:e.jsx("div",{className:"w-[100px]",children:e.jsx(G,{label:"",value:d,compact:!0})})}),e.jsx(f,{children:e.jsx("div",{className:"w-[100px]",children:e.jsx(G,{label:"",value:w,compact:!0})})}),e.jsx(f,{children:e.jsx(ae,{price:n.price,billing_cycle:n.billing_cycle,expired_at:n.expired_at,currency:n.currency,gap:"1",tags:n.tags||""})}),e.jsx(f,{className:"text-center min-w-[80px]",children:e.jsxs("label",{children:["↑",v(s.network.up),"/s"]})}),e.jsx(f,{className:"text-center min-w-[80px]",children:e.jsxs("label",{children:["↓",v(s.network.down),"/s"]})}),e.jsx(f,{className:"text-center min-w-[80px]",children:e.jsxs("label",{children:["↑",v(s.network.totalUp)]})}),e.jsx(f,{className:"text-center min-w-[80px]",children:e.jsxs("label",{children:["↓",v(s.network.totalDown)]})})]}),r&&e.jsx(U,{className:"expanded-row",children:e.jsx(f,{colSpan:12,className:"bg-accent-1",children:e.jsx("div",{className:"expand-content",children:e.jsx(Me,{node:n,nodeData:s})})})})]},n.uuid)})})]})})},Me=({node:l})=>e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(J,{gap:"0",uuid:l.uuid}),e.jsx("div",{children:e.jsx(W,{hours:24,uuid:l.uuid})})]}),Be=({nodes:l,liveData:t})=>{var n,c;const[a]=L(),[h,j]=E("nodeViewMode","grid"),[u,b]=y.useState(""),[x,g]=E("nodeSelectedGroup","all"),i=y.useRef(null),m=y.useMemo(()=>{const s=new Set;return l.forEach(r=>{r.group&&r.group.trim()&&s.add(r.group)}),Array.from(s).sort()},[l]),z=m.length>=1;y.useEffect(()=>{const s=r=>{var d,w;r.key==="/"&&!r.ctrlKey&&!r.metaKey&&!r.altKey&&(r.preventDefault(),(d=i.current)==null||d.focus()),r.key==="Escape"&&u&&(b(""),(w=i.current)==null||w.blur())};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[u]);const C=y.useMemo(()=>{let s=l;if(x!=="all"&&(s=s.filter(d=>d.group===x)),!u.trim())return s;const r=u.toLowerCase().trim();return s.filter(d=>{var B;const w=d.name.toLowerCase().includes(r)||d.os.toLowerCase().includes(r)||d.arch.toLowerCase().includes(r),p=Se(d.region,r),R=!isNaN(Number(r))&&d.price.toString().includes(r),M=((B=t==null?void 0:t.online)==null?void 0:B.includes(d.uuid))||!1;return w||p||R||((r==="online"||r==="在线")&&M||(r==="offline"||r==="离线")&&!M)})},[l,u,t,x]);return e.jsxs("div",{className:"w-full",children:[e.jsxs(o,{direction:{initial:"column",sm:"row"},justify:"between",align:{initial:"stretch",sm:"center"},gap:"4",className:"control-bar mb-2 p-4 rounded-lg",children:[e.jsxs(o,{align:"center",gap:"2",className:"flex-1 max-w-md relative",wrap:"wrap",children:[e.jsx(de,{ref:i,placeholder:a("search.placeholder",{defaultValue:"搜索节点名称、地区、系统..."}),value:u,onChange:s=>b(s.target.value),className:"search-box flex-1 pr-8 min-w-32",children:e.jsx(he,{children:e.jsx(ce,{size:16})})}),u&&e.jsx(S,{variant:"ghost",size:"1",className:"absolute right-2 h-6 w-6 search-clear-button",onClick:()=>{var s;b(""),(s=i.current)==null||s.focus()},children:e.jsx(ye,{size:12})})]}),e.jsxs(o,{align:"center",gap:"2",children:[e.jsx("label",{className:"whitespace-nowrap text-md text-muted-foreground",children:a("view.mode",{defaultValue:"显示模式"})}),e.jsxs(o,{gap:"1",children:[e.jsx(S,{variant:h==="grid"?"solid":"soft",onClick:()=>j("grid"),className:"transition-colors view-switch-button",children:e.jsx(be,{size:16})}),e.jsx(S,{variant:h==="table"?"solid":"soft",onClick:()=>j("table"),className:"transition-colors view-switch-button",children:e.jsx(Ce,{size:16})})]})]})]}),z&&e.jsxs(o,{align:"center",gap:"2",className:"mx-4 mb-2 -mt-2 overflow-x-auto",children:[e.jsx("label",{className:"whitespace-nowrap text-md text-muted-foreground",children:a("common.group",{defaultValue:"分组"})}),e.jsxs(se,{value:x,onValueChange:g,size:"1",children:[e.jsx(_,{value:"all",children:a("common.all",{defaultValue:"所有"})}),m.map(s=>e.jsx(_,{value:s,children:s},s))]})]}),e.jsx(o,{justify:"between",align:"center",className:"mx-4 mb-2",children:u.trim()?e.jsx(N,{size:"2",color:"gray",children:a("search.results",{count:C.length,total:x==="all"?l.length:l.filter(s=>s.group===x).length,defaultValue:`找到 ${C.length} 个服务器，共 ${x==="all"?l.length:l.filter(s=>s.group===x).length} 个`})}):e.jsx(N,{size:"2",color:"gray",children:x==="all"?a("nodeCard.totalNodes",{total:l.length,online:((n=t==null?void 0:t.online)==null?void 0:n.length)||0,defaultValue:`共 ${l.length} 个节点，${((c=t==null?void 0:t.online)==null?void 0:c.length)||0} 个在线`}):a("nodeCard.groupNodes",{group:x,total:C.length,online:C.filter(s=>{var r;return(r=t==null?void 0:t.online)==null?void 0:r.includes(s.uuid)}).length,defaultValue:`${x} 分组：共 ${C.length} 个节点，${C.filter(s=>{var r;return(r=t==null?void 0:t.online)==null?void 0:r.includes(s.uuid)}).length} 个在线`})})}),C.length===0?e.jsxs(o,{direction:"column",align:"center",justify:"center",className:"py-16 mx-4",children:[e.jsx(N,{size:"4",color:"gray",className:"mb-2",children:u.trim()?a("search.no_results",{defaultValue:"未找到匹配的节点"}):a("nodes.empty",{defaultValue:"暂无节点数据"})}),u.trim()&&e.jsx(N,{size:"2",color:"gray",children:a("search.try_different",{defaultValue:"尝试不同的搜索关键词"})})]}):e.jsx(e.Fragment,{children:h==="grid"?e.jsx(Y,{nodes:C,liveData:t}):e.jsx(Te,{nodes:C,liveData:t})})]})},A=l=>{if(l===0)return"0 B/s";const t=["B/s","KB/s","MB/s","GB/s","TB/s"],a=Math.floor(Math.log(l)/Math.log(1024)),h=l/Math.pow(1024,a);let j=2;return a>=3&&(j=1),a<=1&&(j=0),h>=100&&(j=0),`${h.toFixed(j)} ${t[a]}`},ha=()=>{const l=()=>{const[t]=L(),{live_data:a}=H(),{nodeList:h,isLoading:j,error:u}=ue(),[b,x]=E("statusCardsVisibility",{currentTime:!0,currentOnline:!0,regionOverview:!0,trafficOverview:!0,networkSpeed:!0}),g=[{key:"currentTime",title:t("current_time"),getValue:()=>new Date().toLocaleTimeString(),visible:b.currentTime},{key:"currentOnline",title:t("current_online"),getValue:()=>{var i;return`${((i=a==null?void 0:a.data)==null?void 0:i.online.length)??0} / ${(h==null?void 0:h.length)??0}`},visible:b.currentOnline},{key:"regionOverview",title:t("region_overview"),getValue:()=>h?Object.entries(h.reduce((i,m)=>(i[m.region]=(i[m.region]||0)+1,i),{})).length:0,visible:b.regionOverview},{key:"trafficOverview",title:t("traffic_overview"),getValue:()=>{var i;return(i=a==null?void 0:a.data)!=null&&i.data?`↑ ${v(Object.values(a.data.data).reduce((m,z)=>m+(z.network.totalUp||0),0))} / ↓ ${v(Object.values(a.data.data).reduce((m,z)=>m+(z.network.totalDown||0),0))}`:"↑ 0B / ↓ 0B"},visible:b.trafficOverview},{key:"networkSpeed",title:t("network_speed"),getValue:()=>{var i;return(i=a==null?void 0:a.data)!=null&&i.data?`↑ ${A(Object.values(a.data.data).reduce((m,z)=>m+(z.network.up||0),0))} / ↓ ${A(Object.values(a.data.data).reduce((m,z)=>m+(z.network.down||0),0))}`:"↑ 0 B/s / ↓ 0 B/s"},visible:b.networkSpeed}];return j?e.jsx(K,{}):u?e.jsxs("div",{children:["Error: ",u]}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{}),e.jsxs(pe,{className:"summary-card mx-4 md:text-base text-sm relative",children:[e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(te,{children:[e.jsx(ie,{children:e.jsx(S,{variant:"ghost",size:"1",children:e.jsx(me,{size:16})})}),e.jsx(re,{width:"300px",children:e.jsxs(o,{direction:"column",gap:"3",children:[e.jsx(N,{size:"2",weight:"bold",children:t("status_settings")}),e.jsx(o,{direction:"column",gap:"2",children:g.map(i=>e.jsx(Ge,{label:i.title,checked:i.visible,onCheckedChange:m=>x({...b,[i.key]:m})},i.key))})]})})]})}),e.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fit, minmax(230px, 1fr))",gridAutoRows:"min-content"},children:g.filter(i=>i.visible).map(i=>e.jsx(Re,{title:i.title,value:i.getValue()},i.key))})]}),e.jsx(Be,{nodes:h??[],liveData:(a==null?void 0:a.data)??{online:[],data:{}}})]})};return e.jsx(l,{})},Le=()=>{const[l]=L(),{showCallout:t}=H(),a=window.location.protocol==="https:";return e.jsxs(o,{direction:"column",gap:"2",className:"m-2",children:[e.jsxs($,{m:"2",hidden:a,color:"red",children:[e.jsx(O,{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M10.03 3.659c.856-1.548 3.081-1.548 3.937 0l7.746 14.001c.83 1.5-.255 3.34-1.969 3.34H4.254c-1.715 0-2.8-1.84-1.97-3.34zM12.997 17A.999.999 0 1 0 11 17a.999.999 0 0 0 1.997 0m-.259-7.853a.75.75 0 0 0-1.493.103l.004 4.501l.007.102a.75.75 0 0 0 1.493-.103l-.004-4.502z"})})}),e.jsx(P,{children:e.jsx(N,{size:"2",weight:"medium",children:l("warn_https")})})]}),e.jsxs($,{m:"2",hidden:t,id:"callout",color:"tomato",children:[e.jsx(O,{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M21.707 3.707a1 1 0 0 0-1.414-1.414L18.496 4.09a4.25 4.25 0 0 0-5.251.604l-1.068 1.069a1.75 1.75 0 0 0 0 2.474l3.585 3.586a1.75 1.75 0 0 0 2.475 0l1.068-1.068a4.25 4.25 0 0 0 .605-5.25zm-11 8a1 1 0 0 0-1.414-1.414l-1.47 1.47l-.293-.293a.75.75 0 0 0-1.06 0l-1.775 1.775a4.25 4.25 0 0 0-.605 5.25l-1.797 1.798a1 1 0 1 0 1.414 1.414l1.798-1.797a4.25 4.25 0 0 0 5.25-.605l1.775-1.775a.75.75 0 0 0 0-1.06l-.293-.293l1.47-1.47a1 1 0 0 0-1.414-1.414l-1.47 1.47l-1.586-1.586z"})})}),e.jsx(P,{children:e.jsx(N,{size:"2",weight:"medium",children:l("warn_websocket")})})]})]})},Re=({title:l,value:t,description:a})=>e.jsx("div",{className:"min-w-52 md:max-w-72 w-full",children:e.jsxs(o,{direction:"column",gap:"1",children:[e.jsx("label",{className:"text-muted-foreground text-sm",children:l}),e.jsx("label",{className:"font-medium -mt-2 text-md",children:t}),a&&e.jsx(N,{size:"2",color:"gray",children:a})]})}),Ge=({label:l,checked:t,onCheckedChange:a})=>e.jsxs(o,{justify:"between",align:"center",children:[e.jsx(N,{size:"2",children:l}),e.jsx(ge,{checked:t,onCheckedChange:a})]});export{ha as default};
