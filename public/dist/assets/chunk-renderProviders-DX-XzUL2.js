import{j as o,t as c}from"./entry-index-B-fzmtso.js";import{b as q,S as C}from"./chunk-SettingCard-Jn5uUOv3.js";import{S as F}from"./chunk-SettingCardMultiInput-C6J2QTKQ.js";const V=({currentProvider:d,providerDefs:h,providerValues:m,translationPrefix:i,title:b,description:S,footer:y,setProviderValues:$,handleSave:w,t})=>{if(!d||!h[d])return null;const g=h[d],N=g.filter(e=>e.type==="option"&&e.options),j=g.filter(e=>e.type==="bool"),u=g.filter(e=>e.type!=="option"&&e.type!=="bool");return o.jsx("div",{children:u.length>0&&o.jsxs(F,{title:b??"详情",description:S,defaultOpen:!0,items:u.map(e=>({tag:e.name,label:String(t(`${i}.${e.name}`,e.name))+(e.required?" *":""),type:(["int","int64","float32","float64"].includes(e.type),"short"),defaultValue:m[e.name]||e.default||"",placeholder:e.help?String(t(`${i}.${e.name}_help`,e.help)):"",required:e.required,number:["int","int64","float32","float64"].includes(e.type)})),onSave:async e=>{try{const r=u.filter(n=>n.required).filter(n=>!e[n.name]||typeof e[n.name]=="string"&&e[n.name].trim()==="");if(r.length>0){const n=r.map(l=>t(`${i}.${l.name}`,l.name)).join(", ");c.error(t("settings.missing_required_fields",{fieldNames:n}));return}const p={...e};u.forEach(n=>{const l=p[n.name];if(l!=null){if(["int","int64"].includes(n.type)){const s=l===""?0:Number(l);if(isNaN(s))throw c.error(t("settings.invalid_number",{field:t(`${i}.${n.name}`,n.name)})),new Error(`Invalid integer value for ${n.name}`);if(!Number.isInteger(s))throw c.error(t("settings.invalid_integer",{field:t(`${i}.${n.name}`,n.name)})),new Error(`Value must be an integer for ${n.name}`);p[n.name]=s}else if(["float32","float64"].includes(n.type)){const s=l===""?0:Number(l);if(isNaN(s))throw c.error(t("settings.invalid_number",{field:t(`${i}.${n.name}`,n.name)})),new Error(`Invalid float value for ${n.name}`);p[n.name]=s}}});const _={...m,...p};await w(_)}catch(a){console.error("Validation error:",a)}},children:[N.map(e=>o.jsx(q,{bordless:!0,title:String(t(`${i}.${e.name}`,e.name)),description:String(t(`${i}.${e.name}_help`,e.help)),options:e.options.split(",").map(a=>({value:a,label:a})),defaultValue:m[e.name]||e.default||"",OnSave:a=>$(r=>({...r,[e.name]:a}))},e.name)),j.map(e=>o.jsx(C,{bordless:!0,title:String(t(`${i}.${e.name}`,e.name)),description:String(t(`${i}.${e.name}_help`,e.help)),defaultChecked:m[e.name]!==void 0?!!m[e.name]:e.default==="true"||e.default===!0,onChange:a=>$(r=>({...r,[e.name]:a}))},e.name)),o.jsx("label",{className:"text-sm text-muted-foreground",children:y})]})},d)};export{V as r};
